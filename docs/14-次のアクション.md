# 次のアクション

## 📋 現在のフェーズ
**フェーズ2: GPS/画像認識機能実装 (進行中)**

基本機能（認証、スタンプ取得・授与、LIFFアプリ基本実装）は完了しました。
次のステップとして、GPS検証と画像認識機能の実装に進みます。

---

## 🚀 即座に実施すべき項目（現在）

### 1. AI処理機能の実装（優先度: 最高）

#### GPS検証関数の実装
- [x] **GPS検証Lambda関数の作成** ✅
  - 担当者: 担当者D（主導）、担当者B（連携）
  - 完了日: 2025年11月
  - 実装内容:
    - `lambda/gps-verify` 関数の作成 ✅
    - Haversine公式による距離計算実装 ✅
    - 範囲判定ロジック実装（radiusM考慮） ✅
    - API Gateway統合・デプロイ完了 ✅
    - CORS設定完了 ✅
    - テストデータでの動作確認完了 ✅

#### 画像認識関数の実装
- [ ] **画像認識Lambda関数の作成**
  - 担当者: 担当者D（主導）、担当者B（連携）
  - 期限: GPS検証関数実装後
  - 依存: Amazon Rekognition利用申請完了後
  - アクション:
    - `lambda/image-recognize` 関数の作成
    - Amazon Rekognition連携実装
    - 画像検証ロジック実装
    - API Gateway統合
    - サンプル画像での動作確認

### 2. フロントエンド機能拡張（優先度: 高）
- [x] **LIFFアプリ基本構造** ✅
- [x] **LINEログイン機能** ✅
- [x] **スタンプ一覧表示機能** ✅
- [x] **GPSスタンプ画面の実装** ✅（基本機能実装完了）
  - 担当者: 担当者A
  - 実装内容:
    - 現在地取得機能 ✅
    - 距離表示UI ✅
    - 到達判定UI ✅
    - GPS検証APIとの統合 ✅
    - スタンプ画像UI表示機能 ✅
    - 14-213スポット追加 ✅
    - CUSTOM-001スポット対応 ✅
- [ ] **カメラスタンプ画面の実装**
  - 担当者: 担当者A
  - アクション:
    - カメラ起動・撮影機能
    - プレビュー機能
    - アップロード処理
    - 画像認識APIとの統合

### 3. 統合テスト（優先度: 高）
- [ ] **エンドツーエンドテスト**
  - 担当者: 全員
  - アクション:
    - GPS検証フローのテスト
    - 画像認識フローのテスト
    - エラーハンドリングテスト
    - パフォーマンステスト

---

## 📅 現在の詳細タスク

### 担当者A（フロントエンド）
- [x] LIFF開発環境のセットアップ ✅
- [x] LINE Developersコンソールでのチャネル設定 ✅
- [x] プロジェクト構造の作成（HTML/CSS/JS） ✅
- [x] LIFF SDKの動作確認 ✅
- [x] 基本画面の実装 ✅
- [x] GPSスタンプ画面の実装 ✅（基本機能）
- [ ] カメラスタンプ画面の実装
- [ ] ホーム画面の改善（進捗バー、統計情報）

### 担当者B（バックエンド）
- [x] Lambda関数開発環境のセットアップ ✅
- [x] プロジェクト構造の作成（Python） ✅
- [x] DynamoDB接続テスト ✅
- [x] API Gateway統合テスト ✅
- [x] エラーハンドリング標準の確立 ✅
- [x] GPS検証関数の実装支援 ✅
- [ ] 画像認識関数との統合支援

### 担当者C（AWSインフラ）
- [ ] CloudFormation/SAMテンプレートの作成開始
- [ ] CloudWatchロググループの作成
- [ ] 開発環境と本番環境の分離方針決定
- [ ] コスト監視設定
- [x] GPS検証関数用のAPI Gatewayエンドポイント設定 ✅
- [ ] 画像認識関数用のAPI Gatewayエンドポイント設定

### 担当者D（AI処理）
- [ ] Amazon Rekognitionの利用申請・確認
- [x] GPS検証関数の実装 ✅
  - Haversine公式による距離計算 ✅
  - 範囲判定ロジック（radiusM考慮） ✅
  - API Gateway統合・デプロイ完了 ✅
  - CORS設定完了 ✅
- [ ] 画像認識関数の実装
  - Amazon Rekognition連携
  - 画像検証ロジック
- [ ] サンプル画像での動作確認
- [ ] カスタムラベルの訓練計画作成（必要に応じて）

---

## 📅 Week 2の準備タスク

### 全員共通
- [ ] **チームミーティング開催**
  - 進捗共有
  - ブロッカー確認
  - API仕様の初版確認
  - データベーススキーマの確認

### 重要チェックポイント
- [ ] Milestone 1達成確認（Week 2末）
  - 全員が開発開始できる状態になっているか
  - 環境構築ドキュメントが完成しているか

---

## 🔗 依存関係と順序

```
1. AWS/LINEアカウント準備
   ↓
2. GitHubリポジトリ作成
   ↓
3. ローカル環境構築
   ↓
4. AWSリソース作成（DynamoDB, S3）
   ↓
5. API Gatewayセットアップ
   ↓
6. Lambda関数雛形作成
```

---

## ⚠️ リスク対策（事前準備）

### GPS精度問題への対策
- [ ] テスト用の位置情報データ準備
- [ ] 距離計算アルゴリズムの検証方法決定

### 画像認識精度問題への対策
- [ ] サンプル画像の収集開始
- [ ] Rekognitionの精度検証方法決定

### 不正利用対策
- [ ] タイムスタンプ検証ロジックの設計
- [ ] リクエスト制限の設定方針決定

---

## 📝 ドキュメント作成

- [x] **環境構築マニュアル（基本）** ✅
  - ローカル環境構築手順 ✅
  - AWSリソース作成手順 ✅
  - トラブルシューティング ✅

- [x] **API仕様書（初版）** ✅
  - エンドポイント一覧 ✅
  - リクエスト/レスポンス形式 ✅
  - エラーコード定義 ✅

- [x] **API仕様書（更新版）** ✅
  - GPS検証エンドポイントの追加 ✅
- [ ] **API仕様書（次回更新）**
  - 画像認識エンドポイントの追加

- [x] **データベーススキーマ（基本）** ✅
  - テーブル定義 ✅
  - インデックス定義 ✅

---

## 🎯 Milestone 達成状況

### Milestone 1: 環境構築・基盤整備（達成済み）✅
- [x] AWSアカウント設定完了 ✅
- [x] DynamoDBテーブル作成完了 ✅
- [x] S3バケット作成完了 ✅
- [x] API Gateway設定完了 ✅
- [x] GitHubリポジトリ作成完了 ✅
- [x] 全員のローカル環境構築完了 ✅
- [x] Lambda関数の雛形が動作確認済み ✅

### Milestone 2: 基本機能実装（達成済み）✅
- [x] auth関数の実装・デプロイ完了 ✅
- [x] award関数の実装・デプロイ完了 ✅
- [x] stamps関数の実装・デプロイ完了 ✅
- [x] LIFFアプリ基本構造完成 ✅
- [x] LINEログイン機能動作確認 ✅
- [x] スタンプ一覧表示機能実装 ✅

### Milestone 3: GPS/画像認識機能実装（部分達成）
- [x] GPS検証関数の実装・デプロイ ✅
- [x] GPSスタンプ画面の実装 ✅（基本機能完了）
  - [x] スタンプ画像UI表示機能 ✅
  - [x] 複数スポット対応（YIL、Statue、14-213）✅
- [ ] 画像認識関数の実装・デプロイ
- [ ] カメラスタンプ画面の実装
- [ ] 統合テスト完了

---

## 📞 連絡・調整事項

- **週次ミーティング**: 毎週金曜日（進捗確認）
- **緊急連絡**: Slack/Teams等で即時対応
- **ブロッカー報告**: 24時間以内に共有

---

**最終更新**: 2025年1月（GPS検証機能・スタンプ画像UI機能実装完了、14-213スポット追加完了時点）
**次のレビュー**: 画像認識機能実装完了時

**詳細なタスク整理**: `docs/残りのタスク整理.md` を参照

**現在の進捗**: 全体の約88%完了（28/32タスク）
